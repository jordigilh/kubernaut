# Data Storage Service Configuration for Integration Tests (Host Network Mode)
#
# Business Requirement: BR-STORAGE-013 - Semantic Search for Remediation Workflows
# Design Decision: DD-TEST-001 - Port Allocation Strategy
# ADR-030: Service Configuration Management
#
# This configuration uses localhost addresses for host network mode

server:
  port: 18090  # Host network uses direct port
  host: "0.0.0.0"
  readTimeout: "30s"
  writeTimeout: "30s"

logging:
  level: "info"
  format: "json"

database:
  host: "localhost"  # Host network uses localhost
  port: 15433  # Mapped PostgreSQL port from DD-TEST-001
  name: "kubernaut_test"
  user: "kubernaut"
  # ADR-030 Section 6: Secrets loaded from mounted files
  secretsFile: "/app/secrets/database-credentials.yaml"
  passwordKey: "password"
  sslMode: "disable"
  maxOpenConns: 25
  maxIdleConns: 5
  connMaxLifetime: "5m"
  connMaxIdleTime: "5m"

redis:
  addr: "localhost:6379"  # Host network
  db: 0
  max_retries: 3
  pool_size: 10
  secretsFile: "/app/secrets/redis-credentials.yaml"
  passwordKey: "password"

# Embedding Service configuration (for workflow catalog)
embedding:
  url: "http://localhost:18000"  # Host network mapped port
  timeout: "30s"
  max_retries: 3

