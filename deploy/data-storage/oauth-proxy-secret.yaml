apiVersion: v1
kind: Secret
metadata:
  name: data-storage-oauth-proxy-secret
  namespace: kubernaut-system
  labels:
    app: data-storage-service
    component: oauth-proxy
type: Opaque
stringData:
  # DD-AUTH-004: OAuth-proxy cookie secret for session management
  # This should be a random 32-byte base64-encoded string
  # In production, this should be generated securely and stored in a secret manager
  # For E2E/development, we use a static value (NOT FOR PRODUCTION)
  cookie-secret: "REPLACE_ME_WITH_RANDOM_32_BYTE_BASE64_STRING=="

# ========================================
# HOW TO GENERATE COOKIE SECRET (Production)
# ========================================
#
# Generate random 32-byte base64-encoded string:
#   python3 -c 'import os,base64; print(base64.b64encode(os.urandom(32)).decode())'
#
# Or using openssl:
#   openssl rand -base64 32
#
# Example output:
#   8vCxq/sP7dKj5wN9mT2lR+fH1gA3yU6bE4oW0zX7kI=
#
# Then replace the cookie-secret value above with the generated string.
# ========================================

# ========================================
# SECURITY NOTE
# ========================================
#
# This secret is used by oauth-proxy to sign and encrypt session cookies.
# - Must be kept confidential
# - Should be rotated periodically (e.g., every 90 days)
# - Should be different per environment (dev, staging, production)
# - In production, use external secret management (e.g., Vault, AWS Secrets Manager)
#
# Authority: DD-AUTH-004 (OAuth-proxy sidecar design)
# Related: DD-AUTH-005 (Client authentication pattern)
# ========================================


