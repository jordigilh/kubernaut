apiVersion: v1
kind: ConfigMap
metadata:
  name: context-api-config
  namespace: kubernaut-system
  labels:
    app: context-api
    component: configuration
    part-of: kubernaut
data:
  config.yaml: |
    server:
      port: 8091
      host: "0.0.0.0"
      read_timeout: "30s"
      write_timeout: "30s"
    
    logging:
      level: "info"
      format: "json"
    
    cache:
      redis_addr: "redis.kubernaut-system.svc.cluster.local:6379"
      redis_db: 0
      lru_size: 1000
      default_ttl: "5m"
    
    database:
      host: "postgres.kubernaut-system.svc.cluster.local"
      port: 5432
      name: "action_history"
      user: "slm_user"
      # Password provided via Secret environment variable
      ssl_mode: "disable"

---
apiVersion: v1
kind: Secret
metadata:
  name: context-api-db-secret
  namespace: kubernaut-system
  labels:
    app: context-api
    component: secrets
    part-of: kubernaut
type: Opaque
stringData:
  password: "CHANGE_ME_IN_PRODUCTION"
  # Example values for different environments:
  # Development: slm_password_dev
  # Staging: generate-secure-password-for-staging
  # Production: generate-secure-password-for-production

