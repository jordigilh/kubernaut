apiVersion: v1
kind: ConfigMap
metadata:
  name: gateway-config
  namespace: kubernaut-system
  labels:
    app.kubernetes.io/name: kubernaut
    app.kubernetes.io/component: gateway
    app.kubernetes.io/part-of: kubernaut
data:
  config.yaml: |
    # Gateway Service Configuration
    # Organized by Single Responsibility Principle
    # See: pkg/gateway/server.go - type ServerConfig struct

    # HTTP Server configuration
    server:
      listenAddr: ":8080"
      readTimeout: 30s
      writeTimeout: 30s
      idleTimeout: 120s

    # Middleware configuration
    middleware:
      rateLimit:
        requestsPerMinute: 100
        burst: 10

    # DD-GATEWAY-012: Redis REMOVED - Gateway is now Redis-free (K8s-native)
    # All deduplication and storm state managed via RR status fields

    # Business logic configuration
    processing:
      deduplication:
        ttl: 5m

      storm:
        rateThreshold: 10
        patternThreshold: 5
        aggregationWindow: 1m

      environment:
        cacheTtl: 30s
        configmapNamespace: kubernaut-system
        configmapName: kubernaut-environment-overrides

  # NOTE: priority.rego removed (2025-02-05).
  # Priority/Environment classification moved to Signal Processing per DD-CATEGORIZATION-001.

