global:
  image:
    registry: quay.io/kubernaut-ai
    tag: ""  # defaults to Chart.appVersion
    pullPolicy: IfNotPresent
  nodeSelector: {}
  tolerations: []

nameOverride: ""
fullnameOverride: ""

# -- Gateway service (AlertManager webhook target + external signal ingestion)
gateway:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 512Mi
      cpu: 500m
  service:
    type: ClusterIP
    nodePort: null

# -- DataStorage service (audit trail, workflow catalog)
datastorage:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 512Mi
      cpu: 500m
  service:
    type: ClusterIP
    nodePort: null

# -- AIAnalysis controller
aianalysis:
  rego:
    confidenceThreshold: null  # nil = use Rego default (0.8 per BR-AI-076)
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

# -- SignalProcessing controller
signalprocessing:
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

# -- RemediationOrchestrator controller
remediationorchestrator:
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

# -- WorkflowExecution controller
workflowexecution:
  resources:
    requests:
      cpu: 100m
      memory: 64Mi
    limits:
      cpu: 500m
      memory: 256Mi

# -- Notification controller
notification:
  # -- Enable Slack delivery channel. When false (default), only console/log delivery is active.
  # Requires a K8s Secret with the Slack webhook URL (see credentials below).
  slack:
    enabled: false
    channel: "#kubernaut-alerts"
  # Per-receiver credentials projected into /etc/notification/credentials/
  # Each entry creates a projected volume source from a K8s Secret.
  # Issue #104: Named credential store (PV/PVC pattern)
  credentials:
    - name: slack-webhook
      secretName: slack-webhook
      secretKey: webhook-url
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# -- EffectivenessMonitor controller
effectivenessmonitor:
  resources:
    requests:
      memory: 64Mi
      cpu: 50m
    limits:
      memory: 256Mi
      cpu: 500m

# -- HolmesGPT API (LLM integration service)
holmesgptApi:
  replicas: 1
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  service:
    type: ClusterIP
    nodePort: null
  llm:
    provider: ""
    model: ""
    endpoint: ""
    gcpProjectId: ""
    gcpRegion: ""
    maxRetries: 3
    timeoutSeconds: 120
    temperature: 0.7

# -- AuthWebhook admission controller
authwebhook:
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 256Mi
      cpu: 200m

# -- Event Exporter (forwards K8s Warning events to Gateway)
eventExporter:
  image: ghcr.io/resmoio/kubernetes-event-exporter:latest
  resources:
    requests:
      memory: 32Mi
      cpu: 50m
    limits:
      memory: 128Mi
      cpu: 200m

# -- PostgreSQL (DataStorage backend)
# Credentials: provide EITHER existingSecret OR password (via --set).
# existingSecret must contain keys: POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB
postgresql:
  image: postgres:16-alpine
  auth:
    existingSecret: ""  # name of pre-created K8s Secret; when set, chart skips Secret creation
    username: slm_user
    password: ""  # required when existingSecret is empty; use --set or values-demo.yaml
    database: action_history
  storage:
    size: 10Gi
    storageClassName: ""  # empty = cluster default
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 512Mi
      cpu: 500m

# -- Redis (DataStorage DLQ)
# Credentials: provide EITHER existingSecret OR password (via --set).
# existingSecret must contain key: password
redis:
  image: quay.io/jordigilh/redis:7-alpine
  existingSecret: ""  # name of pre-created K8s Secret; when set, chart skips Secret creation
  password: ""
  storage:
    size: 512Mi
    storageClassName: ""  # empty = cluster default
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 256Mi
      cpu: 200m

# -- Hooks (post-install Jobs)
hooks:
  migrations:
    image: postgres:16-alpine
  seedWorkflows:
    image: curlimages/curl:latest
  tlsCerts:
    image: bitnami/kubectl:latest
