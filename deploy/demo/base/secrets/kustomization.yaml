apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: kubernaut-system

generatorOptions:
  disableNameSuffixHash: true

secretGenerator:
  # PostgreSQL credentials (referenced by postgresql Deployment)
  - name: postgresql-secret
    type: Opaque
    envs:
      - postgresql.env

  # DataStorage DB credentials (mounted as YAML file)
  - name: datastorage-db-secret
    type: Opaque
    files:
      - db-secrets.yaml

  # Redis credentials (mounted as YAML file)
  - name: redis-secret
    type: Opaque
    files:
      - redis-secrets.yaml

  # Slack webhook URL for notification controller
  # Source: ~/.kubernaut/notification/slack-webhook.url
  # Create with: cp ~/.kubernaut/notification/slack-webhook.url deploy/demo/base/secrets/slack-webhook-url
  # Or manually create the file with your Slack Incoming Webhook URL
  - name: slack-webhook
    type: Opaque
    files:
      - webhook-url=slack-webhook-url
